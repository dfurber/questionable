import{jsx as e,Fragment as t,jsxs as r}from"react/jsx-runtime";import{createContext as n,useState as o,useContext as i,useReducer as s}from"react";import{useWizard as a}from"use-wizard";import{merge as c,values as u,kebabCase as d,capitalize as l}from"lodash";import{SiteAlert as p,Accordion as v,Button as f,StepIndicator as b,StepIndicatorStep as O,CardGroup as g,Card as y,CardHeader as h,CardBody as m,CardFooter as j,Radio as S,Fieldset as E,Checkbox as P,SummaryBox as w,DateInputGroup as T,DateInput as I}from"@trussworks/react-uswds";import{DateTime as N}from"luxon";import R from"file-saver";import D from"@ramonak/react-progress-bar";import _ from"@rjsf/semantic-ui";function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],s=!0,a=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{s||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C,k,M,q=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};U(this,e),B(this,"started",void 0),B(this,"finished",void 0),B(this,"birthdate",void 0),B(this,"age",void 0),B(this,"answers",{}),Object.assign(this,t),this.started=new Date},x=n({setState:{},state:{}}),F=function(){var e=i(x);if(!e)throw new Error("useGlobalState must be used within a GlobalStateContext");return e},Y=function(t){var r=t.children,n=t.value,i=L(o(void 0===n?{}:n),2),s=i[0],a=i[1];return e(x.Provider,Object.assign({value:{setState:a,state:s}},{children:r}),void 0)},H=function(){var e=F().state.questionnaire;if(!e)throw new Error("useQuestionnaire has no data");return e},G=function(){var e=F().state.config;if(!e)throw new Error("useConfig has no data");return e},V=function(){return{config:G(),questionnaire:H()}};function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.DOB="dob",e.MULTIPLE_CHOICE="multiple_choice",e.MULTIPLE_SELECT="multiple_select"}(C||(C={})),function(e){e.LANDING="Landing",e.NO_RESULTS="No Results",e.RESULTS="Results",e.SUMMARY="Summary"}(k||(k={})),function(e){e.EDIT="Edit"}(M||(M={}));var W,J,$,K,X,Z,ee,te=z(z(z({},k),C),M);!function(e){e[e.FORWARD=1]="FORWARD",e[e.BACKWARD=-1]="BACKWARD"}(W||(W={})),function(e){e.COMPLETE="complete",e.CURRENT="current"}(J||(J={})),function(e){e.CALL="call",e.HYBRID="hybrid",e.ONLINE="online"}($||($={})),function(e){e.RESET="RESET",e.UPDATE="UPDATE"}(K||(K={})),function(e){e.DAY="day",e.MONTH="month",e.YEAR="year"}(X||(X={})),function(e){e.DEV="dev",e.EDIT="edit",e.VIEW="view"}(Z||(Z={})),function(e){e.BASE="usds-q",e.DEV_PANEL_SECTION="usds-q-dev-panel",e.DOB="usds-q-dob",e.MULTI_CHOICE="usds-q-multi-choice",e.MULTI_CHOICE_GROUP="usds-q-multi-choice-group",e.MULTI_SELECT="usds-q-multi-select",e.MULTI_SELECT_GROUP="usds-q-multi-select-group",e.NAVBAR="usds-q-navbar",e.NAVBAR_BUTTON="usds-q-navbar-button",e.PROGRESS_BAR="usds-q-progress-bar",e.PROGRESS_BAR_BOTTOM_SECTION="usds-q-progress-bar-bottom-section",e.PROGRESS_BAR_TOP_SECTION="usds-q-progress-bar-top-section",e.RESULTS_SUMMARY_BOX="usds-q-results-summary-box",e.RESULTS_SUMMARY_HEADER="usds-q-results-summary-header",e.STEP_FOOTER="usds-q-step-footer",e.STEP_HEADER="usds-q-step-header",e.STEP_INFO="usds-q-step-info",e.STEP_LAYOUT="usds-q-step-layout",e.STEP_LAYOUT_SECTION="usds-q-step-layout-section",e.STEP_SUBTITLE="usds-q-step-subtitle"}(ee||(ee={}));var re=function(e,t){return Object.values(e).includes(t)};function ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ie=function(e,t){switch(null==t?void 0:t.type){case K.RESET:return new q;case K.UPDATE:return c(oe({},e),oe({},t.value));default:return e}},se=require("moment"),ae=function(e){return!(!e||e.length<8)&&!!se(e,"MM/DD/YYYY",!0).isValid()},ce=function(e){if(ae(e)){var t=new Date(+e.substring(6,10),+e.substring(0,2)-1,+e.substring(3,5));return N.fromJSDate(t)}},ue=function(e){if(e&&ae(e)){var t=ce(e);if(t)return function(e){var t=N.now(),r=t.year,n=t.month,o=t.day,i=e.year,s=e.month,a=e.day,c=r-i,u=0;n>=s?u=n-s:(c-=1,u=12+n-s);var d=0;return o>=a?d=o-a:(d=31+o-a,(u+=-1)<0&&(u=11,c-=1)),{days:d,months:u,years:c}}(t)}};function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}k.LANDING,k.LANDING,k.LANDING,k.LANDING,k.RESULTS,k.RESULTS,k.RESULTS,k.RESULTS,k.NO_RESULTS,k.RESULTS,k.NO_RESULTS,k.NO_RESULTS,k.SUMMARY,k.RESULTS,k.SUMMARY,k.SUMMARY;var pe=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return console.log(le({},t))},ve=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(r||n)&&pe("Created an empty element",r,n),e(t,{children:r},void 0)};function fe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function be(e,t,r){return t&&fe(e.prototype,t),r&&fe(e,r),e}var Oe=function(){function t(){U(this,t)}return be(t,null,[{key:"getHeader",value:function(t,r){var n,o,i=null===(n=t.step)||void 0===n?void 0:n.title;if(!i)return ve();r.steps.showStepId&&(i="".concat(null===(o=t.step)||void 0===o?void 0:o.id,": ").concat(i));return e("h3",Object.assign({className:"usa-card__heading ".concat(ee.STEP_HEADER)},{children:i}),void 0)}},{key:"getSubtitle",value:function(t){var r,n=null===(r=t.step)||void 0===r?void 0:r.subTitle;return n?e("p",{className:ee.STEP_SUBTITLE,dangerouslySetInnerHTML:{__html:n}},void 0):ve()}},{key:"getInfoBox",value:function(t){var r,n=null===(r=t.step)||void 0===r?void 0:r.info;return n?e(p,Object.assign({variant:"info",showIcon:!1,className:"outline-1px ".concat(ee.STEP_INFO)},{children:n}),void 0):ve()}},{key:"getFooter",value:function(t){var r,n=null===(r=t.step)||void 0===r?void 0:r.footer;return n?e("p",{className:"font-sans-6 ".concat(ee.STEP_FOOTER),dangerouslySetInnerHTML:{__html:n}},void 0):ve()}},{key:"resetQuestionable",value:function(e){e.dispatchForm({type:K.RESET}),e.wizard.goToStep("A")}},{key:"saveAsJson",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"questionable.json",r=new Blob([e],{type:"text/plain;charset=utf-8"});R.saveAs(r,t)}}]),t}(),ge=function(n){if(!V().config.dev)return ve();return r(t,{children:[e(v,{items:[{content:e("pre",{children:e("code",{children:JSON.stringify(n.form,null,4)},void 0)},void 0),expanded:!1,id:"developer-output",title:"Temporary developer panel"}]},void 0),e("br",{},void 0),e("nav",Object.assign({className:ee.NAVBAR},{children:e(f,Object.assign({type:"reset",secondary:!0,onClick:function(){return Oe.resetQuestionable(n)}},{children:"Reset"}),void 0)}),void 0)]},void 0)},ye=function(t){var r=V(),n=r.config,o=r.questionnaire;if(n.progressBar.hide)return ve();var i=o.getProgressPercent(t,n);return e("div",Object.assign({className:ee.PROGRESS_BAR},{children:e(D,{completed:i,bgColor:n.progressBar.bgColor,baseBgColor:n.progressBar.baseBgColor,isLabelVisible:!1,borderRadius:"0px"},void 0)}),void 0)},he=function(t){return e(O,{label:t.name,status:t.status||"incomplete"},t.id)},me=function(t){var r=V(),n=r.config,o=r.questionnaire;if(n.progressBar.hide)return ve();var i=o.getSections(t,n);return 0===i.length?ve():e(b,Object.assign({centered:!0,counters:"small"},{children:i.map(he)}),void 0)},je=function(t){var r=t.props,n=t.position,o=V().config;if(o.progressBar.hide||o.progressBar.position!==n)return ve();switch(o.progressBar.type){case"progress-bar":return e(ye,Object.assign({},r),void 0);case"step-indicator":return e(me,Object.assign({},r),void 0);default:return ve("Could not find progress type",o.progressBar.type)}},Se=function(){function e(){U(this,e)}return be(e,null,[{key:"goToStep",value:function(e,t){t.wizard.goToStep(e)}},{key:"goToNextStep",value:function(t,r,n){e.goToStep(r.getNextStep(t,n),t)}},{key:"goToPrevStep",value:function(t,r,n){e.goToStep(r.getPreviousStep(t,n),t)}},{key:"isNextEnabled",value:function(t){var r,n,o;if(null==t||!t.step)throw new Error("This survery is not defined");return t.stepId===te.LANDING||(t.stepId===te.SUMMARY||!!t.form&&((null===(r=t.step)||void 0===r?void 0:r.type)===C.DOB?void 0!==(null===(n=t.form)||void 0===n||null===(o=n.age)||void 0===o?void 0:o.years)&&t.form.age.years>=0:e.isValid(t.form,t.step.id)))}},{key:"isValid",value:function(e,t){var r;if(!e.answers[t])return!1;var n=e.answers[t],o=u(n.answers);switch(n.type){case te.DOB:return void 0!==(null==e||null===(r=e.age)||void 0===r?void 0:r.years)&&e.age.years>0;case te.MULTIPLE_CHOICE:return void 0!==n.answer&&-1!==(null==o?void 0:o.indexOf(n.answer));default:return!0}}},{key:"getFieldSetName",value:function(e){return d(e.step.title)}},{key:"getDomId",value:function(t,r){var n=e.getFieldSetName(r);return"".concat(n,"-").concat(d(t))}}]),e}(),Ee=function(t){return e(f,Object.assign({className:"".concat(ee.NAVBAR_BUTTON," ").concat(ee.NAVBAR_BUTTON,"-").concat(t.dir),"data-testid":"".concat(t.dir,"-button-").concat(t.stepId),disabled:t.disabled(),onClick:t.onClick,type:"button",unstyled:"link"===t.mode,outline:"link"!==t.mode&&"prev"===t.dir},{children:t.label}),void 0)},Pe=function(t){var r,n,o=V(),i=o.questionnaire,s=o.config,a=t.step,c=t.verticalPos!==s.nav.prev.verticalPos,u=t.stepId===te.LANDING||t.stepId===i.flow[1],d=t.stepId===te.RESULTS||t.stepId===te.NO_RESULTS,l=s.mode!==Z.EDIT||t.stepId===i.flow[0]&&s.mode===Z.EDIT;if(c||(u||d)&&l)return ve();var p=(null==a||null===(r=a.buttons)||void 0===r||null===(n=r.prev)||void 0===n?void 0:n.label)||s.nav.prev.defaultLabel||"Previous";return e(Ee,Object.assign({},{dir:"prev",disabled:function(){return!1},label:p,mode:s.nav.prev.mode||"link",onClick:function(){return Se.goToPrevStep(t,i,s)},stepId:"".concat(t.stepId)}),void 0)},we=function(t){var r,n,o=V(),i=o.questionnaire,s=o.config,a=t.step,c=t.verticalPos!==s.nav.next.verticalPos,u=t.stepId===te.RESULTS||t.stepId===te.NO_RESULTS,d=s.mode!==Z.EDIT||t.stepId===i.flow[i.flow.length-1]&&s.mode===Z.EDIT;if(c||u&&d)return ve();var l=(null==a||null===(r=a.buttons)||void 0===r||null===(n=r.next)||void 0===n?void 0:n.label)||s.nav.next.defaultLabel||"Previous";return e(Ee,Object.assign({},{dir:"next",disabled:function(){return s.mode===Z.VIEW&&!Se.isNextEnabled(t)},label:l,mode:s.nav.next.mode||"button",onClick:function(){return Se.goToNextStep(t,i,s)},stepId:"".concat(t.stepId)}),void 0)},Te=function(t){return r("nav",Object.assign({className:"".concat(ee.NAVBAR," ").concat(ee.NAVBAR,"-").concat(t.verticalPos)},{children:[e(Pe,Object.assign({},t),void 0),e(we,Object.assign({},t),void 0)]}),void 0)};function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Re=function(t){var n=V().questionnaire;return r("div",{children:[e(Te,Object.assign({},Ne(Ne({},t),{},{verticalPos:"top"})),void 0),e("section",{children:e(g,{children:r(y,Object.assign({headerFirst:!0,gridLayout:{tablet:{col:12}},containerProps:{className:"border-ink"}},{children:[e(h,Object.assign({className:"bg-base-lightest"},{children:r("h1",{children:["Edit the ",n.header]},void 0)}),void 0),e(m,Object.assign({className:"padding-top-3"},{children:t.children}),void 0),e(j,{children:'Click "Save" to save your edits, or "Next" to continue editing'},void 0)]}),void 0)},void 0)},void 0)]},void 0)},De=require("./survey.json");function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ae(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Le={properties:{step:{$ref:"#/definitions/IStep",title:"Step"}}},Ue=Ae(Ae({type:"object"},Le),De),Be=function(){function t(){U(this,t)}return be(t,null,[{key:"getReason",value:function(e,t,r){var n,o=null===(n=t.match)||void 0===n?void 0:n.explanation,i=r.questionnaire,s=r.config;if(!o)return"";if(null!=s&&s.dev&&t.match){var a,c;if(o+="<br><br>",void 0!==t.match.ageCalc||void 0!==t.match.minAge||void 0!==t.match.maxAge)o+="You are ".concat(null===(a=e.form.age)||void 0===a?void 0:a.years," years "),o+="and ".concat(null===(c=e.form.age)||void 0===c?void 0:c.months," months old. ");Object.keys(t.match.answers).forEach((function(e){var t=i.getQuestionById(e);o+='You answered "<b>'.concat(t.answer,'</b>" to the question "<i>').concat(t.title,'.</i>" ')}))}return o}},{key:"getResults",value:function(n,o){return o.questionnaire.getResults(n.form).map((function(i){return r("li",Object.assign({className:"padding-bottom-2"},{children:[r("span",{children:[i.label,":","  ",e("b",{children:i.name},void 0)]},void 0),e("div",{className:"text-light",dangerouslySetInnerHTML:{__html:t.getReason(n,i,o)}},void 0)]}),"".concat(n.stepId,"_").concat(i.id))}))}}]),t}(),Ce=function(){function t(){U(this,t)}return be(t,null,[{key:"updateForm",value:function(e,t){Object.assign(t.step,{answer:e});var r={answers:B({},t.step.id,t.step)};return t.dispatchForm({type:K.UPDATE,value:r})}},{key:"isSelected",value:function(e,t){if(null!=t&&t.form){var r=t.form.answers[t.step.id];return Se.isValid(t.form,t.step.id)&&r.answer===e}}},{key:"getRadio",value:function(r,n,o){var i,s=function(){return t.updateForm(r,n)},a=Se.getDomId(r,n);return e(S,{id:a,name:Se.getFieldSetName(n),label:r,value:r,checked:!0===t.isSelected(r,n),className:ee.MULTI_CHOICE,onChange:s,onClick:s,tile:!0===(null===(i=o.questions)||void 0===i?void 0:i.showAnswerBorder)},a)}},{key:"getRadios",value:function(r,n){return e(E,Object.assign({legend:r.step.title,className:ee.MULTI_CHOICE_GROUP,legendStyle:"srOnly"},{children:Object.keys(r.step.answers).map((function(e){return t.getRadio(r.step.answers[+e],r,n)}))}),void 0)}},{key:"getCheckbox",value:function(r,n,o){var i,s=function(){return t.updateForm(r,n)},a=Se.getDomId(r,n);return e(P,{id:a,name:Se.getFieldSetName(n),label:r,value:r,checked:!0===t.isSelected(r,n),className:ee.MULTI_SELECT,onChange:s,onClick:s,tile:!0===(null===(i=o.questions)||void 0===i?void 0:i.showAnswerBorder)},a)}},{key:"getCheckboxes",value:function(r,n){return e(E,Object.assign({legend:r.step.title,className:ee.MULTI_SELECT_GROUP,legendStyle:"srOnly"},{children:Object.keys(r.step.answers).map((function(e){return t.getCheckbox(r.step.answers[+e],r,n)}))}),void 0)}},{key:"getBirthdate",value:function(e){var t;if(null!==(t=e.form)&&void 0!==t&&t.birthdate)return ce(e.form.birthdate)}},{key:"toBirthdate",value:function(e){if(e.month&&e.day&&e.year)return"".concat(e.month.padStart(2,"0"),"/").concat(e.day.padStart(2,"0"),"/").concat(e.year)}}]),t}(),ke=function(t){var r=V().questionnaire,n=function(e){var t=Ae({},Le);return re(k,e.step.type)?t.properties.step.$ref="#/definitions/IPage":re(C,e.step.type)&&(t.properties.step.$ref="#/definitions/IQuestion"),c(t,Ue)}(t),o=d(r.header);return e(_,Object.assign({schema:n,uiSchema:{step:{"ui:order":["title","subTitle","bodyHeader","bodySubHeader","body","info","footer","*"]}},onSubmit:function(e){var t=e.formData;Oe.saveAsJson(t,"".concat(o,".json"))},formData:{step:t.step}},{children:e("div",{children:e(f,Object.assign({type:"submit"},{children:"Save"}),void 0)},void 0)}),void 0)},Me=function(t){return e(Re,Object.assign({},t,{children:e(ke,Object.assign({},t),void 0)}),void 0)};function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var He=function(t){var n=V().config,o=n.steps,i=o.borderClass,s=o.titleClass;return r("div",{children:[e(Te,Object.assign({},Ye(Ye({},t),{},{verticalPos:"top"})),void 0),e("section",Object.assign({className:ee.STEP_LAYOUT},{children:e(g,{children:r(y,Object.assign({headerFirst:!0,gridLayout:{tablet:{col:12}},containerProps:{className:i}},{children:[e(h,Object.assign({className:s},{children:Oe.getHeader(t,n)}),void 0),r(m,{children:[Oe.getSubtitle(t),t.children,Oe.getInfoBox(t)]},void 0),e(j,{children:Oe.getFooter(t)},void 0)]}),void 0)},void 0)}),void 0),e(Te,Object.assign({},Ye(Ye({},t),{},{verticalPos:"bottom"})),void 0)]},void 0)},Ge=function(t){var r=t.step;return r?e(He,Object.assign({},t,{children:e("p",{children:r.body},void 0)}),void 0):ve()},Ve=function(t){return t.step?e(He,Object.assign({},t),void 0):ve()},Qe=function(t){var n=t.step,o=V(),i=o.questionnaire;if(!n)return ve();var s=i.getAction();return e(He,Object.assign({},t,{children:r(w,Object.assign({heading:n.bodyHeader||"",className:ee.RESULTS_SUMMARY_HEADER},{children:[e("p",{children:n.bodySubHeader},void 0),e("ul",Object.assign({className:"usa-list usa-list--unstyled ".concat(ee.RESULTS_SUMMARY_BOX)},{children:Be.getResults(t,o)}),void 0),e("p",{dangerouslySetInnerHTML:{__html:(null==n?void 0:n.body)||""}},void 0),e("h2",{children:s.title},void 0),e("p",{children:s.description},void 0),e("p",{dangerouslySetInnerHTML:{__html:s.action}},void 0),"."]}),void 0)}),void 0)},ze=function(t){var n=Object.keys(t.form.answers).map((function(n){return e("li",Object.assign({className:"padding-bottom-2"},{children:r("span",Object.assign({className:"text-light"},{children:[t.form.answers[n].title,":  ",e("b",{children:t.form.answers[n].answer},void 0)]}),void 0)}),n)}));return e("ul",Object.assign({className:"usa-list usa-list--unstyled"},{children:n}),void 0)},We=function(t){return t.step?e(He,Object.assign({},t,{children:ze(t)}),void 0):ve()};function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Xe=function(t){var n,i,s,a,c,u,d=t.step,p={day:null===(n=Ce.getBirthdate(t))||void 0===n||null===(i=n.day)||void 0===i?void 0:i.toString(),month:null===(s=Ce.getBirthdate(t))||void 0===s||null===(a=s.month)||void 0===a?void 0:a.toString(),year:null===(c=Ce.getBirthdate(t))||void 0===c||null===(u=c.year)||void 0===u?void 0:u.toString()},v=L(o(p),2),f=v[0],b=v[1];if(!d)return ve();var O,g=function(e,r){var n=e.target.value;if(n){f[r]=n,b(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ke(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},f));var o=Ce.toBirthdate(f),i=ue(o);i&&t.dispatchForm({type:K.UPDATE,value:{age:i,birthdate:o}})}},y=function(r,n){var o=2;return r===X.YEAR&&(o=4),e(I,{id:Se.getDomId(r,t),name:n,label:l(r),unit:r,maxLength:o,minLength:o,defaultValue:f[r],onChange:function(e){return g(e,r)}},void 0)};return O="date_of_birth",r(T,{children:[y(X.MONTH,O),y(X.DAY,O),y(X.YEAR,O)]},void 0)},Ze=function(t){return e(He,Object.assign({},t,{children:e(Xe,Object.assign({},t),void 0)}),void 0)},et=function(e){var t,r=V().config;return void 0===(null==e||null===(t=e.step)||void 0===t?void 0:t.answers)?ve("Question and answer are not defined"):Ce.getRadios(e,r)},tt=function(t){return e(He,Object.assign({},t,{children:e(et,Object.assign({},t),void 0)}),void 0)},rt=function(e){var t,r=V().config;return void 0===(null==e||null===(t=e.step)||void 0===t?void 0:t.answers)?ve():Ce.getCheckboxes(e,r)},nt=function(t){return e(He,Object.assign({},t,{children:e(rt,Object.assign({},t),void 0)}),void 0)};function ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function it(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(r),!0).forEach((function(t){B(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ot(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var st=function(t,r){return re(C,r.type)?function(t){var r=t.stepId,n=V().questionnaire,o=n.getStepById("".concat(r));if(!re(C,o.type))return ve("Not a question");var i=n.getQuestionById(o.id),s=it({},it({step:i},t));switch(i.type){case C.DOB:return e(Ze,Object.assign({},s),void 0);case C.MULTIPLE_CHOICE:return e(tt,Object.assign({},s),void 0);case C.MULTIPLE_SELECT:return e(nt,Object.assign({},s),void 0);default:return ve("Question does not exist","QuestionFactory")}}(t):re(k,r.type)?function(t){var r=t.stepId,n=V().questionnaire,o=n.getStepById("".concat(r));if(!re(k,o.type))return ve("Not a page");var i=n.getPageById(o.id),s=$e({},$e({step:i},t));switch(i.type){case k.LANDING:return e(Ge,Object.assign({},s),void 0);case k.NO_RESULTS:return e(Ve,Object.assign({},s),void 0);case k.RESULTS:return e(Qe,Object.assign({},s),void 0);case k.SUMMARY:return e(We,Object.assign({},s),void 0);default:return ve("Page does not exist","PageFactory")}}(t):ve("Step does not exist","StepFactory")},at=function(t){var r=t.stepId,n=V(),o=n.questionnaire,i=n.config,s=o.getStepById("".concat(r));return i.mode===Z.EDIT?function(t,r){var n=xe({},xe({step:V().questionnaire.getStepById(r.id)},t));if(re(C,r.type)){var o=n;return e(Me,Object.assign({},o),void 0)}if(re(k,r.type)){var i=n;return e(Me,Object.assign({},i),void 0)}return ve("Not an editable type")}(t,s):st(t,s)},ct=function(t){var n=t.questionnaire;if(!n)throw new Error("questionable is undefined");var o=L(a(n.flow),2),i=o[0],c=o[1],u=L(s(ie,new q),2),d=u[0],l=u[1];return e(Y,Object.assign({value:t},{children:r("div",Object.assign({className:ee.BASE},{children:[e("section",Object.assign({className:"section ".concat(ee.PROGRESS_BAR_TOP_SECTION)},{children:e(je,Object.assign({},{position:"top",props:{dispatchForm:l,form:d,stepId:i,wizard:c}}),void 0)}),void 0),e("section",Object.assign({className:"section ".concat(ee.STEP_LAYOUT_SECTION)},{children:e(at,Object.assign({},{dispatchForm:l,form:d,stepId:i,wizard:c}),void 0)}),void 0),e("section",Object.assign({className:"section ".concat(ee.PROGRESS_BAR_BOTTOM_SECTION)},{children:e(je,Object.assign({},{position:"bottom",props:{dispatchForm:l,form:d,stepId:i,wizard:c}}),void 0)}),void 0),e("section",Object.assign({className:"section ".concat(ee.DEV_PANEL_SECTION)},{children:e(ge,Object.assign({},{dispatchForm:l,form:d,stepId:i,wizard:c}),void 0)}),void 0)]}),void 0)}),void 0)};export{ct as Questionable,De as surveySchema};
//# sourceMappingURL=index.esm.js.map
