"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react/jsx-runtime"),t=require("react"),r=require("use-wizard"),n=require("lodash"),o=require("@trussworks/react-uswds"),i=require("luxon"),s=require("file-saver"),a=require("@ramonak/react-progress-bar"),c=require("@rjsf/semantic-ui");function u(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var d=u(s),l=u(a),p=u(c);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],s=!0,a=!1;try{for(r=r.call(e);!(s=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){a=!0,o=e}finally{try{s||null==r.return||r.return()}finally{if(a)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g,j,y,h=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(this,e),O(this,"started",void 0),O(this,"finished",void 0),O(this,"birthdate",void 0),O(this,"age",void 0),O(this,"answers",{}),Object.assign(this,t),this.started=new Date},m=t.createContext({setState:{},state:{}}),S=function(){var e=t.useContext(m);if(!e)throw new Error("useGlobalState must be used within a GlobalStateContext");return e},E=function(r){var n=r.children,o=r.value,i=void 0===o?{}:o,s=f(t.useState(i),2),a=s[0],c=s[1];return e.jsx(m.Provider,Object.assign({value:{setState:c,state:a}},{children:n}),void 0)},P=function(){var e=S().state.questionnaire;if(!e)throw new Error("useQuestionnaire has no data");return e},x=function(){var e=S().state.config;if(!e)throw new Error("useConfig has no data");return e},w=function(){return{config:x(),questionnaire:P()}};function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e.DOB="dob",e.MULTIPLE_CHOICE="multiple_choice",e.MULTIPLE_SELECT="multiple_select"}(g||(g={})),function(e){e.LANDING="Landing",e.NO_RESULTS="No Results",e.RESULTS="Results",e.SUMMARY="Summary"}(j||(j={})),function(e){e.EDIT="Edit"}(y||(y={}));var R,N,D,_,A,L,C,B=I(I(I({},j),g),y);!function(e){e[e.FORWARD=1]="FORWARD",e[e.BACKWARD=-1]="BACKWARD"}(R||(R={})),function(e){e.COMPLETE="complete",e.CURRENT="current"}(N||(N={})),function(e){e.CALL="call",e.HYBRID="hybrid",e.ONLINE="online"}(D||(D={})),function(e){e.RESET="RESET",e.UPDATE="UPDATE"}(_||(_={})),function(e){e.DAY="day",e.MONTH="month",e.YEAR="year"}(A||(A={})),function(e){e.DEV="dev",e.EDIT="edit",e.VIEW="view"}(L||(L={})),function(e){e.BASE="usds-q",e.DEV_PANEL_SECTION="usds-q-dev-panel",e.DOB="usds-q-dob",e.MULTI_CHOICE="usds-q-multi-choice",e.MULTI_CHOICE_GROUP="usds-q-multi-choice-group",e.MULTI_SELECT="usds-q-multi-select",e.MULTI_SELECT_GROUP="usds-q-multi-select-group",e.NAVBAR="usds-q-navbar",e.NAVBAR_BUTTON="usds-q-navbar-button",e.PROGRESS_BAR="usds-q-progress-bar",e.PROGRESS_BAR_BOTTOM_SECTION="usds-q-progress-bar-bottom-section",e.PROGRESS_BAR_TOP_SECTION="usds-q-progress-bar-top-section",e.RESULTS_SUMMARY_BOX="usds-q-results-summary-box",e.RESULTS_SUMMARY_HEADER="usds-q-results-summary-header",e.STEP_FOOTER="usds-q-step-footer",e.STEP_HEADER="usds-q-step-header",e.STEP_INFO="usds-q-step-info",e.STEP_LAYOUT="usds-q-step-layout",e.STEP_LAYOUT_SECTION="usds-q-step-layout-section",e.STEP_SUBTITLE="usds-q-step-subtitle"}(C||(C={}));var U=function(e,t){return Object.values(e).includes(t)};function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M=function(e,t){switch(null==t?void 0:t.type){case _.RESET:return new h;case _.UPDATE:return n.merge(q({},e),q({},t.value));default:return e}},F=require("moment"),H=function(e){return!(!e||e.length<8)&&!!F(e,"MM/DD/YYYY",!0).isValid()},Y=function(e){if(H(e)){var t=new Date(+e.substring(6,10),+e.substring(0,2)-1,+e.substring(3,5));return i.DateTime.fromJSDate(t)}},G=function(e){if(e&&H(e)){var t=Y(e);if(t)return function(e){var t=i.DateTime.now(),r=t.year,n=t.month,o=t.day,s=e.year,a=e.month,c=e.day,u=r-s,d=0;n>=a?d=n-a:(u-=1,d=12+n-a);var l=0;return o>=c?l=o-c:(l=31+o-c,(d+=-1)<0&&(d=11,u-=1)),{days:l,months:d,years:u}}(t)}};function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}j.LANDING,j.LANDING,j.LANDING,j.LANDING,j.RESULTS,j.RESULTS,j.RESULTS,j.RESULTS,j.NO_RESULTS,j.RESULTS,j.NO_RESULTS,j.NO_RESULTS,j.SUMMARY,j.RESULTS,j.SUMMARY,j.SUMMARY;var z=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return console.log(Q({},t))},W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(t||r)&&z("Created an empty element",t,r),e.jsx(e.Fragment,{children:t},void 0)};function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e,t,r){return t&&J(e.prototype,t),r&&J(e,r),e}var K=function(){function t(){b(this,t)}return $(t,null,[{key:"getHeader",value:function(t,r){var n,o,i=null===(n=t.step)||void 0===n?void 0:n.title;if(!i)return W();r.steps.showStepId&&(i="".concat(null===(o=t.step)||void 0===o?void 0:o.id,": ").concat(i));return e.jsx("h3",Object.assign({className:"usa-card__heading ".concat(C.STEP_HEADER)},{children:i}),void 0)}},{key:"getSubtitle",value:function(t){var r,n=null===(r=t.step)||void 0===r?void 0:r.subTitle;return n?e.jsx("p",{className:C.STEP_SUBTITLE,dangerouslySetInnerHTML:{__html:n}},void 0):W()}},{key:"getInfoBox",value:function(t){var r,n=null===(r=t.step)||void 0===r?void 0:r.info;return n?e.jsx(o.SiteAlert,Object.assign({variant:"info",showIcon:!1,className:"outline-1px ".concat(C.STEP_INFO)},{children:n}),void 0):W()}},{key:"getFooter",value:function(t){var r,n=null===(r=t.step)||void 0===r?void 0:r.footer;return n?e.jsx("p",{className:"font-sans-6 ".concat(C.STEP_FOOTER),dangerouslySetInnerHTML:{__html:n}},void 0):W()}},{key:"resetQuestionable",value:function(e){e.dispatchForm({type:_.RESET}),e.wizard.goToStep("A")}},{key:"saveAsJson",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"questionable.json",r=new Blob([e],{type:"text/plain;charset=utf-8"});d.default.saveAs(r,t)}}]),t}(),X=function(t){if(!w().config.dev)return W();return e.jsxs(e.Fragment,{children:[e.jsx(o.Accordion,{items:[{content:e.jsx("pre",{children:e.jsx("code",{children:JSON.stringify(t.form,null,4)},void 0)},void 0),expanded:!1,id:"developer-output",title:"Temporary developer panel"}]},void 0),e.jsx("br",{},void 0),e.jsx("nav",Object.assign({className:C.NAVBAR},{children:e.jsx(o.Button,Object.assign({type:"reset",secondary:!0,onClick:function(){return K.resetQuestionable(t)}},{children:"Reset"}),void 0)}),void 0)]},void 0)},Z=function(t){var r=w(),n=r.config,o=r.questionnaire;if(n.progressBar.hide)return W();var i=o.getProgressPercent(t,n);return e.jsx("div",Object.assign({className:C.PROGRESS_BAR},{children:e.jsx(l.default,{completed:i,bgColor:n.progressBar.bgColor,baseBgColor:n.progressBar.baseBgColor,isLabelVisible:!1,borderRadius:"0px"},void 0)}),void 0)},ee=function(t){return e.jsx(o.StepIndicatorStep,{label:t.name,status:t.status||"incomplete"},t.id)},te=function(t){var r=w(),n=r.config,i=r.questionnaire;if(n.progressBar.hide)return W();var s=i.getSections(t,n);return 0===s.length?W():e.jsx(o.StepIndicator,Object.assign({centered:!0,counters:"small"},{children:s.map(ee)}),void 0)},re=function(t){var r=t.props,n=t.position,o=w().config;if(o.progressBar.hide||o.progressBar.position!==n)return W();switch(o.progressBar.type){case"progress-bar":return e.jsx(Z,Object.assign({},r),void 0);case"step-indicator":return e.jsx(te,Object.assign({},r),void 0);default:return W("Could not find progress type",o.progressBar.type)}},ne=function(){function e(){b(this,e)}return $(e,null,[{key:"goToStep",value:function(e,t){t.wizard.goToStep(e)}},{key:"goToNextStep",value:function(t,r,n){e.goToStep(r.getNextStep(t,n),t)}},{key:"goToPrevStep",value:function(t,r,n){e.goToStep(r.getPreviousStep(t,n),t)}},{key:"isNextEnabled",value:function(t){var r,n,o;if(null==t||!t.step)throw new Error("This survery is not defined");return t.stepId===B.LANDING||(t.stepId===B.SUMMARY||!!t.form&&((null===(r=t.step)||void 0===r?void 0:r.type)===g.DOB?void 0!==(null===(n=t.form)||void 0===n||null===(o=n.age)||void 0===o?void 0:o.years)&&t.form.age.years>=0:e.isValid(t.form,t.step.id)))}},{key:"isValid",value:function(e,t){var r;if(!e.answers[t])return!1;var o=e.answers[t],i=n.values(o.answers);switch(o.type){case B.DOB:return void 0!==(null==e||null===(r=e.age)||void 0===r?void 0:r.years)&&e.age.years>0;case B.MULTIPLE_CHOICE:return void 0!==o.answer&&-1!==(null==i?void 0:i.indexOf(o.answer));default:return!0}}},{key:"getFieldSetName",value:function(e){return n.kebabCase(e.step.title)}},{key:"getDomId",value:function(t,r){var o=e.getFieldSetName(r);return"".concat(o,"-").concat(n.kebabCase(t))}}]),e}(),oe=function(t){return e.jsx(o.Button,Object.assign({className:"".concat(C.NAVBAR_BUTTON," ").concat(C.NAVBAR_BUTTON,"-").concat(t.dir),"data-testid":"".concat(t.dir,"-button-").concat(t.stepId),disabled:t.disabled(),onClick:t.onClick,type:"button",unstyled:"link"===t.mode,outline:"link"!==t.mode&&"prev"===t.dir},{children:t.label}),void 0)},ie=function(t){var r,n,o=w(),i=o.questionnaire,s=o.config,a=t.step,c=t.verticalPos!==s.nav.prev.verticalPos,u=t.stepId===B.LANDING||t.stepId===i.flow[1],d=t.stepId===B.RESULTS||t.stepId===B.NO_RESULTS,l=s.mode!==L.EDIT||t.stepId===i.flow[0]&&s.mode===L.EDIT;if(c||(u||d)&&l)return W();var p=(null==a||null===(r=a.buttons)||void 0===r||null===(n=r.prev)||void 0===n?void 0:n.label)||s.nav.prev.defaultLabel||"Previous";return e.jsx(oe,Object.assign({},{dir:"prev",disabled:function(){return!1},label:p,mode:s.nav.prev.mode||"link",onClick:function(){return ne.goToPrevStep(t,i,s)},stepId:"".concat(t.stepId)}),void 0)},se=function(t){var r,n,o=w(),i=o.questionnaire,s=o.config,a=t.step,c=t.verticalPos!==s.nav.next.verticalPos,u=t.stepId===B.RESULTS||t.stepId===B.NO_RESULTS,d=s.mode!==L.EDIT||t.stepId===i.flow[i.flow.length-1]&&s.mode===L.EDIT;if(c||u&&d)return W();var l=(null==a||null===(r=a.buttons)||void 0===r||null===(n=r.next)||void 0===n?void 0:n.label)||s.nav.next.defaultLabel||"Previous";return e.jsx(oe,Object.assign({},{dir:"next",disabled:function(){return s.mode===L.VIEW&&!ne.isNextEnabled(t)},label:l,mode:s.nav.next.mode||"button",onClick:function(){return ne.goToNextStep(t,i,s)},stepId:"".concat(t.stepId)}),void 0)},ae=function(t){return e.jsxs("nav",Object.assign({className:"".concat(C.NAVBAR," ").concat(C.NAVBAR,"-").concat(t.verticalPos)},{children:[e.jsx(ie,Object.assign({},t),void 0),e.jsx(se,Object.assign({},t),void 0)]}),void 0)};function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var de=function(t){var r=w().questionnaire;return e.jsxs("div",{children:[e.jsx(ae,Object.assign({},ue(ue({},t),{},{verticalPos:"top"})),void 0),e.jsx("section",{children:e.jsx(o.CardGroup,{children:e.jsxs(o.Card,Object.assign({headerFirst:!0,gridLayout:{tablet:{col:12}},containerProps:{className:"border-ink"}},{children:[e.jsx(o.CardHeader,Object.assign({className:"bg-base-lightest"},{children:e.jsxs("h1",{children:["Edit the ",r.header]},void 0)}),void 0),e.jsx(o.CardBody,Object.assign({className:"padding-top-3"},{children:t.children}),void 0),e.jsx(o.CardFooter,{children:'Click "Save" to save your edits, or "Next" to continue editing'},void 0)]}),void 0)},void 0)},void 0)]},void 0)},le=require("./survey.json");function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fe={properties:{step:{$ref:"#/definitions/IStep",title:"Step"}}},be=ve(ve({type:"object"},fe),le),Oe=function(){function t(){b(this,t)}return $(t,null,[{key:"getReason",value:function(e,t,r){var n,o=null===(n=t.match)||void 0===n?void 0:n.explanation,i=r.questionnaire,s=r.config;if(!o)return"";if(null!=s&&s.dev&&t.match){var a,c;if(o+="<br><br>",void 0!==t.match.ageCalc||void 0!==t.match.minAge||void 0!==t.match.maxAge)o+="You are ".concat(null===(a=e.form.age)||void 0===a?void 0:a.years," years "),o+="and ".concat(null===(c=e.form.age)||void 0===c?void 0:c.months," months old. ");Object.keys(t.match.answers).forEach((function(e){var t=i.getQuestionById(e);o+='You answered "<b>'.concat(t.answer,'</b>" to the question "<i>').concat(t.title,'.</i>" ')}))}return o}},{key:"getResults",value:function(r,n){return n.questionnaire.getResults(r.form).map((function(o){return e.jsxs("li",Object.assign({className:"padding-bottom-2"},{children:[e.jsxs("span",{children:[o.label,":","  ",e.jsx("b",{children:o.name},void 0)]},void 0),e.jsx("div",{className:"text-light",dangerouslySetInnerHTML:{__html:t.getReason(r,o,n)}},void 0)]}),"".concat(r.stepId,"_").concat(o.id))}))}}]),t}(),ge=function(){function t(){b(this,t)}return $(t,null,[{key:"updateForm",value:function(e,t){Object.assign(t.step,{answer:e});var r={answers:O({},t.step.id,t.step)};return t.dispatchForm({type:_.UPDATE,value:r})}},{key:"isSelected",value:function(e,t){if(null!=t&&t.form){var r=t.form.answers[t.step.id];return ne.isValid(t.form,t.step.id)&&r.answer===e}}},{key:"getRadio",value:function(r,n,i){var s,a=function(){return t.updateForm(r,n)},c=ne.getDomId(r,n);return e.jsx(o.Radio,{id:c,name:ne.getFieldSetName(n),label:r,value:r,checked:!0===t.isSelected(r,n),className:C.MULTI_CHOICE,onChange:a,onClick:a,tile:!0===(null===(s=i.questions)||void 0===s?void 0:s.showAnswerBorder)},c)}},{key:"getRadios",value:function(r,n){return e.jsx(o.Fieldset,Object.assign({legend:r.step.title,className:C.MULTI_CHOICE_GROUP,legendStyle:"srOnly"},{children:Object.keys(r.step.answers).map((function(e){return t.getRadio(r.step.answers[+e],r,n)}))}),void 0)}},{key:"getCheckbox",value:function(r,n,i){var s,a=function(){return t.updateForm(r,n)},c=ne.getDomId(r,n);return e.jsx(o.Checkbox,{id:c,name:ne.getFieldSetName(n),label:r,value:r,checked:!0===t.isSelected(r,n),className:C.MULTI_SELECT,onChange:a,onClick:a,tile:!0===(null===(s=i.questions)||void 0===s?void 0:s.showAnswerBorder)},c)}},{key:"getCheckboxes",value:function(r,n){return e.jsx(o.Fieldset,Object.assign({legend:r.step.title,className:C.MULTI_SELECT_GROUP,legendStyle:"srOnly"},{children:Object.keys(r.step.answers).map((function(e){return t.getCheckbox(r.step.answers[+e],r,n)}))}),void 0)}},{key:"getBirthdate",value:function(e){var t;if(null!==(t=e.form)&&void 0!==t&&t.birthdate)return Y(e.form.birthdate)}},{key:"toBirthdate",value:function(e){if(e.month&&e.day&&e.year)return"".concat(e.month.padStart(2,"0"),"/").concat(e.day.padStart(2,"0"),"/").concat(e.year)}}]),t}(),je=function(t){var r=w().questionnaire,i=function(e){var t=ve({},fe);return U(j,e.step.type)?t.properties.step.$ref="#/definitions/IPage":U(g,e.step.type)&&(t.properties.step.$ref="#/definitions/IQuestion"),n.merge(t,be)}(t),s=n.kebabCase(r.header);return e.jsx(p.default,Object.assign({schema:i,uiSchema:{step:{"ui:order":["title","subTitle","bodyHeader","bodySubHeader","body","info","footer","*"]}},onSubmit:function(e){var t=e.formData;K.saveAsJson(t,"".concat(s,".json"))},formData:{step:t.step}},{children:e.jsx("div",{children:e.jsx(o.Button,Object.assign({type:"submit"},{children:"Save"}),void 0)},void 0)}),void 0)},ye=function(t){return e.jsx(de,Object.assign({},t,{children:e.jsx(je,Object.assign({},t),void 0)}),void 0)};function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?he(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ee(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pe=function(t){var r=w().config,n=r.steps,i=n.borderClass,s=n.titleClass;return e.jsxs("div",{children:[e.jsx(ae,Object.assign({},Ee(Ee({},t),{},{verticalPos:"top"})),void 0),e.jsx("section",Object.assign({className:C.STEP_LAYOUT},{children:e.jsx(o.CardGroup,{children:e.jsxs(o.Card,Object.assign({headerFirst:!0,gridLayout:{tablet:{col:12}},containerProps:{className:i}},{children:[e.jsx(o.CardHeader,Object.assign({className:s},{children:K.getHeader(t,r)}),void 0),e.jsxs(o.CardBody,{children:[K.getSubtitle(t),t.children,K.getInfoBox(t)]},void 0),e.jsx(o.CardFooter,{children:K.getFooter(t)},void 0)]}),void 0)},void 0)}),void 0),e.jsx(ae,Object.assign({},Ee(Ee({},t),{},{verticalPos:"bottom"})),void 0)]},void 0)},xe=function(t){var r=t.step;return r?e.jsx(Pe,Object.assign({},t,{children:e.jsx("p",{children:r.body},void 0)}),void 0):W()},we=function(t){return t.step?e.jsx(Pe,Object.assign({},t),void 0):W()},Te=function(t){var r=t.step,n=w(),i=n.questionnaire;if(!r)return W();var s=i.getAction();return e.jsx(Pe,Object.assign({},t,{children:e.jsxs(o.SummaryBox,Object.assign({heading:r.bodyHeader||"",className:C.RESULTS_SUMMARY_HEADER},{children:[e.jsx("p",{children:r.bodySubHeader},void 0),e.jsx("ul",Object.assign({className:"usa-list usa-list--unstyled ".concat(C.RESULTS_SUMMARY_BOX)},{children:Oe.getResults(t,n)}),void 0),e.jsx("p",{dangerouslySetInnerHTML:{__html:(null==r?void 0:r.body)||""}},void 0),e.jsx("h2",{children:s.title},void 0),e.jsx("p",{children:s.description},void 0),e.jsx("p",{dangerouslySetInnerHTML:{__html:s.action}},void 0),"."]}),void 0)}),void 0)},Ie=function(t){var r=Object.keys(t.form.answers).map((function(r){return e.jsx("li",Object.assign({className:"padding-bottom-2"},{children:e.jsxs("span",Object.assign({className:"text-light"},{children:[t.form.answers[r].title,":  ",e.jsx("b",{children:t.form.answers[r].answer},void 0)]}),void 0)}),r)}));return e.jsx("ul",Object.assign({className:"usa-list usa-list--unstyled"},{children:r}),void 0)},Re=function(t){return t.step?e.jsx(Pe,Object.assign({},t,{children:Ie(t)}),void 0):W()};function Ne(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function De(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ne(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Ae=function(r){var i,s,a,c,u,d,l=r.step,p={day:null===(i=ge.getBirthdate(r))||void 0===i||null===(s=i.day)||void 0===s?void 0:s.toString(),month:null===(a=ge.getBirthdate(r))||void 0===a||null===(c=a.month)||void 0===c?void 0:c.toString(),year:null===(u=ge.getBirthdate(r))||void 0===u||null===(d=u.year)||void 0===d?void 0:d.toString()},v=f(t.useState(p),2),b=v[0],g=v[1];if(!l)return W();var j,y=function(e,t){var n=e.target.value;if(n){b[t]=n,g(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_e(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},b));var o=ge.toBirthdate(b),i=G(o);i&&r.dispatchForm({type:_.UPDATE,value:{age:i,birthdate:o}})}},h=function(t,i){var s=2;return t===A.YEAR&&(s=4),e.jsx(o.DateInput,{id:ne.getDomId(t,r),name:i,label:n.capitalize(t),unit:t,maxLength:s,minLength:s,defaultValue:b[t],onChange:function(e){return y(e,t)}},void 0)};return j="date_of_birth",e.jsxs(o.DateInputGroup,{children:[h(A.MONTH,j),h(A.DAY,j),h(A.YEAR,j)]},void 0)},Le=function(t){return e.jsx(Pe,Object.assign({},t,{children:e.jsx(Ae,Object.assign({},t),void 0)}),void 0)},Ce=function(e){var t,r=w().config;return void 0===(null==e||null===(t=e.step)||void 0===t?void 0:t.answers)?W("Question and answer are not defined"):ge.getRadios(e,r)},Be=function(t){return e.jsx(Pe,Object.assign({},t,{children:e.jsx(Ce,Object.assign({},t),void 0)}),void 0)},Ue=function(e){var t,r=w().config;return void 0===(null==e||null===(t=e.step)||void 0===t?void 0:t.answers)?W():ge.getCheckboxes(e,r)},ke=function(t){return e.jsx(Pe,Object.assign({},t,{children:e.jsx(Ue,Object.assign({},t),void 0)}),void 0)};function qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Fe=function(t,r){return U(g,r.type)?function(t){var r=t.stepId,n=w().questionnaire,o=n.getStepById("".concat(r));if(!U(g,o.type))return W("Not a question");var i=n.getQuestionById(o.id),s=Me({},Me({step:i},t));switch(i.type){case g.DOB:return e.jsx(Le,Object.assign({},s),void 0);case g.MULTIPLE_CHOICE:return e.jsx(Be,Object.assign({},s),void 0);case g.MULTIPLE_SELECT:return e.jsx(ke,Object.assign({},s),void 0);default:return W("Question does not exist","QuestionFactory")}}(t):U(j,r.type)?function(t){var r=t.stepId,n=w().questionnaire,o=n.getStepById("".concat(r));if(!U(j,o.type))return W("Not a page");var i=n.getPageById(o.id),s=De({},De({step:i},t));switch(i.type){case j.LANDING:return e.jsx(xe,Object.assign({},s),void 0);case j.NO_RESULTS:return e.jsx(we,Object.assign({},s),void 0);case j.RESULTS:return e.jsx(Te,Object.assign({},s),void 0);case j.SUMMARY:return e.jsx(Re,Object.assign({},s),void 0);default:return W("Page does not exist","PageFactory")}}(t):W("Step does not exist","StepFactory")},He=function(t){var r=t.stepId,n=w(),o=n.questionnaire,i=n.config,s=o.getStepById("".concat(r));return i.mode===L.EDIT?function(t,r){var n=me({},me({step:w().questionnaire.getStepById(r.id)},t));if(U(g,r.type)){var o=n;return e.jsx(ye,Object.assign({},o),void 0)}if(U(j,r.type)){var i=n;return e.jsx(ye,Object.assign({},i),void 0)}return W("Not an editable type")}(t,s):Fe(t,s)};exports.Questionable=function(n){var o=n.questionnaire;if(!o)throw new Error("questionable is undefined");var i=f(r.useWizard(o.flow),2),s=i[0],a=i[1],c=f(t.useReducer(M,new h),2),u=c[0],d=c[1];return e.jsx(E,Object.assign({value:n},{children:e.jsxs("div",Object.assign({className:C.BASE},{children:[e.jsx("section",Object.assign({className:"section ".concat(C.PROGRESS_BAR_TOP_SECTION)},{children:e.jsx(re,Object.assign({},{position:"top",props:{dispatchForm:d,form:u,stepId:s,wizard:a}}),void 0)}),void 0),e.jsx("section",Object.assign({className:"section ".concat(C.STEP_LAYOUT_SECTION)},{children:e.jsx(He,Object.assign({},{dispatchForm:d,form:u,stepId:s,wizard:a}),void 0)}),void 0),e.jsx("section",Object.assign({className:"section ".concat(C.PROGRESS_BAR_BOTTOM_SECTION)},{children:e.jsx(re,Object.assign({},{position:"bottom",props:{dispatchForm:d,form:u,stepId:s,wizard:a}}),void 0)}),void 0),e.jsx("section",Object.assign({className:"section ".concat(C.DEV_PANEL_SECTION)},{children:e.jsx(X,Object.assign({},{dispatchForm:d,form:u,stepId:s,wizard:a}),void 0)}),void 0)]}),void 0)}),void 0)},exports.surveySchema=le;
//# sourceMappingURL=index.js.map
